(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 8.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     17136,        544]
NotebookOptionsPosition[     14650,        454]
NotebookOutlinePosition[     15130,        473]
CellTagsIndexPosition[     15087,        470]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["h5dumpImport Examples", "Title"],

Cell["Version 1.0", "Subtitle"],

Cell["\<\
Copyright (c) 2012 Michael Morris
This software is released under MIT Open Source License\
\>", "Subsubtitle"],

Cell[CellGroupData[{

Cell["Configuration", "Section"],

Cell[CellGroupData[{

Cell["Set the location of the h5dump command line tool.", "Subsection"],

Cell[TextData[{
 StyleBox["Currently, the h5dumpImport package does not directly import the \
HDF5 (.h5) file format.  The h5dumpImport package imports an ASCII dump of a \
dataset generated by the h5dump command line tool.",
  FontWeight->"Bold",
  FontColor->GrayLevel[0]],
 StyleBox["  \n",
  FontColor->GrayLevel[0]],
 "\nSource code and pre-built binary distributions of the HDF5 Software ",
 "which includes the",
 " h5dump command line tool can be found at The HDF Group\[CloseCurlyQuote]s \
website: http://www.hdfgroup.org/HDF5/release/obtain5.html#obtain .\n\nIn \
order to use the h5dump convenience function in the h5dumpImport package, the \
h5dump command line tool must be installed.  However, the following examples \
will work out of the box without the h5dump command line tool.  The sample \
h5dump dump files will be used instead of  calling the h5dump convenience \
function in the package."
}], "Text"],

Cell[BoxData[
 RowBox[{
  RowBox[{"h5dumpLocation", "=", "\"\</usr/bin/h5dump\>\""}], ";"}]], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Load the h5dump package.", "Subsection"],

Cell["\<\
To facilitate these examples working out of the box, the path to the \
h5dumpImport package is added to $path.\
\>", "Text"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"AppendTo", "[", 
   RowBox[{"$Path", ",", 
    RowBox[{"NotebookDirectory", "[", "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Needs", "[", "\"\<h5dumpImport`\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"?", "h5dumpImport`*"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", " ", "*)"}]}]}], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Set the paths to sample data.", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"h5SamplePathAndFilename", " ", "=", " ", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", " ", 
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], ",", " ", "\"\<testData\>\"", 
      ",", " ", "\"\<testData.h5\>\""}], "}"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
   "h5dumpSamplePathAndFilenames", "[", "\"\</AllDatatypes\>\"", "]"}], " ", 
   "=", " ", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", " ", 
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], ",", " ", "\"\<testData\>\"", 
      ",", " ", "\"\<h5dump_testData.h5_AllDatatypes.txt\>\""}], "}"}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"h5dumpSamplePathAndFilenames", "[", "\"\</Fruit\>\"", "]"}], "=", 
   " ", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", " ", 
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], ",", " ", "\"\<testData\>\"", 
      ",", " ", "\"\<h5dump_testData.h5_Fruit.txt\>\""}], "}"}], "]"}]}], 
  ";"}]}], "Input"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[{
 "Use ",
 StyleBox["Mathematica\[CloseCurlyQuote]",
  FontSlant->"Italic"],
 "s Import function to query the HDF5 (.h5) file for the names of the datasets"
}], "Section"],

Cell[TextData[{
 "Use ",
 StyleBox["Mathematica",
  FontSlant->"Italic"],
 "\[CloseCurlyQuote]s Import function to query the available datasets in the \
HDF5 (.h5) file."
}], "Text"],

Cell[BoxData[
 RowBox[{"datasetNames", "=", 
  RowBox[{"Import", "[", 
   RowBox[{"h5SamplePathAndFilename", ",", " ", "\"\<Datasets\>\""}], 
   "]"}]}]], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Use the h5dump convenience function to dump a dataset from the HDF5 (.h5) file\
\>", "Section"],

Cell["\<\
Use the h5dump convenience function in the package that calls the h5dump \
command line tool to dump the dataset from the HDF5 (.h5) file.\
\>", "Text"],

Cell[BoxData[
 RowBox[{"dumpFile", " ", "=", " ", "\[IndentingNewLine]", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"FileExistsQ", "[", "h5dumpLocation", "]"}], " ", "&&", " ", 
     RowBox[{"File", "===", 
      RowBox[{"FileType", "[", "h5dumpLocation", "]"}]}]}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
      "h5dump", " ", "command", " ", "line", " ", "tool", " ", "has", " ", 
       "been", " ", "installed"}], ",", " ", 
      RowBox[{
      "use", " ", "the", " ", "h5dump", " ", "convenience", " ", "function", 
       " ", "in", " ", "the", " ", "package", " ", "to", " ", "dump", " ", 
       "the", " ", "dataset", " ", "from", " ", "the", " ", "HDF5", " ", 
       RowBox[{"(", 
        RowBox[{".", "h5"}], ")"}], " ", 
       RowBox[{"file", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"h5dump", "[", 
     RowBox[{"h5dumpLocation", ",", "h5SamplePathAndFilename", ",", 
      RowBox[{"datasetNames", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
      "h5dump", " ", "command", " ", "line", " ", "tool", " ", "has", " ", 
       "not", " ", "been", " ", "installed"}], ",", " ", 
      RowBox[{
      "to", " ", "facilitate", " ", "these", " ", "examples", " ", "working", 
       " ", "out", " ", "of", " ", "the", " ", "box"}], ",", " ", 
      RowBox[{"use", " ", "the", " ", "h5dump", " ", "sample", " ", 
       RowBox[{"file", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"h5dumpSamplePathAndFilenames", "[", 
     RowBox[{"datasetNames", "[", 
      RowBox[{"[", "1", "]"}], "]"}], "]"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Example #1 - basic functionality", "Section"],

Cell["\<\
This example uses the /AllDatatypes dataset that contains 3 items of compound \
data, each with 10 elements.\
\>", "Text"],

Cell[CellGroupData[{

Cell["Create an h5dumpImport object, read all the data, and close.", \
"Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dumpImport", "=", " ", 
   RowBox[{"h5dumpImportNew", "[", 
    RowBox[{
     RowBox[{"h5dumpImport", "[", "]"}], ",", " ", "dumpFile"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "All", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportClose", "[", "]"}]}], ";"}]}], "Input"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Example #2 - expanded functionality", "Section"],

Cell["\<\
This example uses the /AllDatatypes dataset that contains 3 items of compound \
data, each with 10 elements.\
\>", "Text"],

Cell[CellGroupData[{

Cell["\<\
Create an h5dumpImport object and print the dump file header info.\
\>", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dumpImport", "=", " ", 
   RowBox[{"h5dumpImportNew", "[", 
    RowBox[{
     RowBox[{"h5dumpImport", "[", "]"}], ",", " ", "dumpFile"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Name of HDF5 file: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportHdf5Name", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Name of dataset being imported: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDatasetName", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<The length of the data being imported: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataLength", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{
   "\"\<Mathematica datatype for each of the data items:\\n\\t\>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataTypes", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Names for each of the data items:\\n\\t\>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataNames", "[", "]"}]}]}], "]"}], ";"}]}], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Read all of the data in a single function call.", "Subsection"],

Cell[BoxData[
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "All", "]"}]}]], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Reset the data to the beginning and import one piece of data at a time.\
\>", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportReset", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "]"}]}]}], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Reset the data to the beginning and import two pieces of data at a time.\
\>", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportReset", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "2", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "2", "]"}]}]}], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Reset the data to the beginning, fast forward to the third item in the dump \
file (0 based index), and read the remaining data.\
\>", "Subsection"],

Cell["\<\
Note: In this example, the argument to h5dumpImportFastForward is 2 because \
it is the third item of a 0 based index.  \
\>", "Text"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportReset", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportFastForward", "[", "2", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "All", "]"}]}]}], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Close the h5dumpImport object.", "Subsection"],

Cell[BoxData[
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportClose", "[", "]"}]}], ";"}]], "Input"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Example #3 - complete example", "Section"],

Cell["\<\
This example uses the /Fruit dataset that contains 10 items of compound data, \
each with 2 elements.\
\>", "Text"],

Cell[BoxData[{
 RowBox[{"dumpFile", " ", "=", " ", "\[IndentingNewLine]", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"FileExistsQ", "[", "h5dumpLocation", "]"}], " ", "&&", " ", 
     RowBox[{"File", "===", 
      RowBox[{"FileType", "[", "h5dumpLocation", "]"}]}]}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
      "h5dump", " ", "command", " ", "line", " ", "tool", " ", "has", " ", 
       "been", " ", "installed"}], ",", 
      RowBox[{
      "use", " ", "the", " ", "h5dump", " ", "convenience", " ", "function", 
       " ", "in", " ", "the", " ", "package", " ", "to", " ", "dump", " ", 
       "the", " ", "dataset", " ", "from", " ", "the", " ", "HDF5", " ", 
       RowBox[{"(", 
        RowBox[{".", "h5"}], ")"}], " ", 
       RowBox[{"file", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"h5dump", "[", 
     RowBox[{"h5dumpLocation", ",", "h5SamplePathAndFilename", ",", 
      RowBox[{"datasetNames", "[", 
       RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
      "h5dump", " ", "command", " ", "line", " ", "tool", " ", "has", " ", 
       "not", " ", "been", " ", "installed"}], ",", " ", 
      RowBox[{
      "to", " ", "facilitate", " ", "these", " ", "examples", " ", "working", 
       " ", "out", " ", "of", " ", "the", " ", "box"}], ",", " ", 
      RowBox[{"use", " ", "the", " ", "h5dump", " ", "sample", " ", 
       RowBox[{"file", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"h5dumpSamplePathAndFilenames", "[", 
     RowBox[{"datasetNames", "[", 
      RowBox[{"[", "2", "]"}], "]"}], "]"}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dumpImport", "=", " ", 
   RowBox[{"h5dumpImportNew", "[", 
    RowBox[{
     RowBox[{"h5dumpImport", "[", "]"}], ",", " ", "dumpFile"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Name of HDF5 file: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportHdf5Name", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Name of dataset being imported: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDatasetName", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<The length of the data being imported: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataLength", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{
   "\"\<Mathematica datatype for each of the data items:\\n\\t\>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataTypes", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Names for each of the data items:\\n\\t\>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataNames", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "All", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportClose", "[", "]"}]}], ";"}]}], "Input"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1016, 1022},
WindowMargins->{{84, Automatic}, {Automatic, -1072}},
ShowSelection->True,
Magnification:>FEPrivate`If[
  FEPrivate`Equal[FEPrivate`$VersionNumber, 6.], 1.5, 1.5 Inherited],
FrontEndVersion->"8.0 for Mac OS X x86 (32-bit, 64-bit Kernel) (October 5, \
2011)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[579, 22, 38, 0, 114, "Title"],
Cell[620, 24, 31, 0, 69, "Subtitle"],
Cell[654, 26, 120, 3, 65, "Subsubtitle"],
Cell[CellGroupData[{
Cell[799, 33, 32, 0, 100, "Section"],
Cell[CellGroupData[{
Cell[856, 37, 71, 0, 51, "Subsection"],
Cell[930, 39, 924, 17, 219, "Text"],
Cell[1857, 58, 102, 2, 40, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[1996, 65, 46, 0, 51, "Subsection"],
Cell[2045, 67, 134, 3, 39, "Text"],
Cell[2182, 72, 358, 10, 110, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[2577, 87, 51, 0, 51, "Subsection"],
Cell[2631, 89, 1058, 29, 204, "Input"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[3738, 124, 186, 5, 133, "Section"],
Cell[3927, 131, 182, 6, 39, "Text"],
Cell[4112, 139, 163, 4, 40, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[4312, 148, 105, 2, 133, "Section"],
Cell[4420, 152, 162, 3, 62, "Text"],
Cell[4585, 157, 1774, 39, 294, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[6396, 201, 51, 0, 100, "Section"],
Cell[6450, 203, 132, 3, 39, "Text"],
Cell[CellGroupData[{
Cell[6607, 210, 84, 1, 51, "Subsection"],
Cell[6694, 213, 424, 11, 87, "Input"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[7167, 230, 54, 0, 100, "Section"],
Cell[7224, 232, 132, 3, 39, "Text"],
Cell[CellGroupData[{
Cell[7381, 239, 96, 2, 51, "Subsection"],
Cell[7480, 243, 1394, 36, 248, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[8911, 284, 69, 0, 51, "Subsection"],
Cell[8983, 286, 103, 2, 40, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9123, 293, 101, 2, 51, "Subsection"],
Cell[9227, 297, 409, 9, 110, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9673, 311, 102, 2, 51, "Subsection"],
Cell[9778, 315, 322, 7, 87, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10137, 327, 158, 3, 74, "Subsection"],
Cell[10298, 332, 144, 3, 39, "Text"],
Cell[10445, 337, 353, 9, 87, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10835, 351, 52, 0, 51, "Subsection"],
Cell[10890, 353, 116, 3, 40, "Input"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[11055, 362, 48, 0, 100, "Section"],
Cell[11106, 364, 125, 3, 39, "Text"],
Cell[11234, 369, 3388, 81, 570, "Input"]
}, Open  ]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
