Notebook[{

Cell[CellGroupData[{
Cell[TextData[{
 "h5dumpImport Examples\n",
 StyleBox["Version 1.0",
  FontSize->24,
  FontWeight->"Plain"],
 "\n",
 StyleBox["Copyright (c) 2012 Michael Morris\nThis software is released under \
MIT Open Source License",
  FontSize->14,
  FontWeight->"Plain"]
}], "Title"],

Cell[CellGroupData[{

Cell["Configuration", "Section"],

Cell[CellGroupData[{

Cell["Set the location of the h5dump command line tool.", "Subsection"],

Cell[TextData[{
 StyleBox["Currently, the h5dumpImport package does not directly import the \
HDF5 (.h5) file format.  The h5dumpImport package imports an ASCII dump of a \
dataset generated by the h5dump command line tool.",
  FontWeight->"Bold",
  FontColor->GrayLevel[0]],
 StyleBox["  \n",
  FontColor->GrayLevel[0]],
 "\nSource code and pre-built binary distributions of the HDF5 Software ",
 "which includes the",
 " h5dump command line tool can be found at The HDF Group\[CloseCurlyQuote]s \
website: http://www.hdfgroup.org/HDF5/release/obtain5.html#obtain .\n\nIn \
order to use the h5dump convenience function in the h5dumpImport package, the \
h5dump command line tool must be installed.  However, the following examples \
will work out of the box without the h5dump command line tool.  The sample \
h5dump dump files will be used instead of  calling the h5dump convenience \
function in the package."
}], "Text"],

Cell[BoxData[
 RowBox[{
  RowBox[{"h5dumpLocation", "=", "\"\</usr/bin/h5dump\>\""}], 
  ";"}]], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["Load the h5dump package.", "Subsection"],

Cell["\<\
To facilitate these examples working out of the box, the path to the \
h5dumpImport package is added to $path.\
\>", "Text"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"AppendTo", "[", 
   RowBox[{"$Path", ",", 
    RowBox[{"NotebookDirectory", "[", "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Needs", "[", "\"\<h5dumpImport`\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"?", "h5dumpImport`*"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", " ", "*)"}]}]}], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["Set the paths to sample data.", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"h5SamplePathAndFilename", " ", "=", " ", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", " ", 
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], ",", " ", "\"\<testData\>\"", 
      ",", " ", "\"\<testData.h5\>\""}], "}"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
   "h5dumpSamplePathAndFilenames", "[", "\"\</AllDatatypes\>\"", "]"}], " ", 
   "=", " ", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", " ", 
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], ",", " ", "\"\<testData\>\"", 
      ",", " ", "\"\<h5dump_testData.h5_AllDatatypes.txt\>\""}], "}"}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"h5dumpSamplePathAndFilenames", "[", "\"\</Fruit\>\"", "]"}], "=", 
   " ", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", " ", 
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], ",", " ", "\"\<testData\>\"", 
      ",", " ", "\"\<h5dump_testData.h5_Fruit.txt\>\""}], "}"}], "]"}]}], 
  ";"}]}], "Input"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell[TextData[{
 "Use ",
 StyleBox["Mathematica\[CloseCurlyQuote]",
  FontSlant->"Italic"],
 "s Import function to query the HDF5 (.h5) file for the names of the datasets"
}], "Section"],

Cell[TextData[{
 "Use ",
 StyleBox["Mathematica",
  FontSlant->"Italic"],
 "\[CloseCurlyQuote]s Import function to query the available datasets in the \
HDF5 (.h5) file."
}], "Text"],

Cell[BoxData[
 RowBox[{"datasetNames", "=", 
  RowBox[{"Import", "[", 
   RowBox[{"h5SamplePathAndFilename", ",", " ", "\"\<Datasets\>\""}], 
   "]"}]}]], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["\<\
Use the h5dump convenience function to dump a dataset from the HDF5 (.h5) file\
\>", "Section"],

Cell["\<\
Use the h5dump convenience function in the package that calls the h5dump \
command line tool to dump the dataset from the HDF5 (.h5) file.\
\>", "Text"],

Cell[BoxData[
 RowBox[{"dumpFile", " ", "=", " ", "\[IndentingNewLine]", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"FileExistsQ", "[", "h5dumpLocation", "]"}], " ", "&&", " ", 
     RowBox[{"File", "===", 
      RowBox[{"FileType", "[", "h5dumpLocation", "]"}]}]}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
      "h5dump", " ", "command", " ", "line", " ", "tool", " ", "has", " ", 
       "been", " ", "installed"}], ",", " ", 
      RowBox[{
      "use", " ", "the", " ", "h5dump", " ", "convenience", " ", "function", 
       " ", "in", " ", "the", " ", "package", " ", "to", " ", "dump", " ", 
       "the", " ", "dataset", " ", "from", " ", "the", " ", "HDF5", " ", 
       RowBox[{"(", 
        RowBox[{".", "h5"}], ")"}], " ", 
       RowBox[{"file", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"h5dump", "[", 
     RowBox[{"h5dumpLocation", ",", "h5SamplePathAndFilename", ",", 
      RowBox[{"datasetNames", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
      "h5dump", " ", "command", " ", "line", " ", "tool", " ", "has", " ", 
       "not", " ", "been", " ", "installed"}], ",", " ", 
      RowBox[{
      "to", " ", "facilitate", " ", "these", " ", "examples", " ", "working", 
       " ", "out", " ", "of", " ", "the", " ", "box"}], ",", " ", 
      RowBox[{"use", " ", "the", " ", "h5dump", " ", "sample", " ", 
       RowBox[{"file", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"h5dumpSamplePathAndFilenames", "[", 
     RowBox[{"datasetNames", "[", 
      RowBox[{"[", "1", "]"}], "]"}], "]"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["Example #1 - basic functionality", "Section"],

Cell["\<\
This example uses the /AllDatatypes dataset that contains 3 items of compound \
data, each with 10 elements.\
\>", "Text"],

Cell[CellGroupData[{

Cell["Create an h5dumpImport object, read all the data, and close.", \
"Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dumpImport", "=", " ", 
   RowBox[{"h5dumpImportNew", "[", 
    RowBox[{
     RowBox[{"h5dumpImport", "[", "]"}], ",", " ", "dumpFile"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "All", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportClose", "[", "]"}]}], ";"}]}], "Input"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Example #2 - expanded functionality", "Section"],

Cell["\<\
This example uses the /AllDatatypes dataset that contains 3 items of compound \
data, each with 10 elements.\
\>", "Text"],

Cell[CellGroupData[{

Cell["\<\
Create an h5dumpImport object and print the dump file header info.\
\>", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dumpImport", "=", " ", 
   RowBox[{"h5dumpImportNew", "[", 
    RowBox[{
     RowBox[{"h5dumpImport", "[", "]"}], ",", " ", "dumpFile"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Name of HDF5 file: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportHdf5Name", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Name of dataset being imported: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDatasetName", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<The length of the data being imported: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataLength", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{
   "\"\<Mathematica datatype for each of the data items:\\n\\t\>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataTypes", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Names for each of the data items:\\n\\t\>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataNames", "[", "]"}]}]}], "]"}], 
  ";"}]}], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["Read all of the data in a single function call.", "Subsection"],

Cell[BoxData[
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "All", "]"}]}]], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["\<\
Reset the data to the beginning and import one piece of data at a time.\
\>", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportReset", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "]"}]}]}], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["\<\
Reset the data to the beginning and import two pieces of data at a time.\
\>", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportReset", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "2", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "2", "]"}]}]}], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["\<\
Reset the data to the beginning, fast forward to the third item in the dump \
file (0 based index), and read the remaining data.\
\>", "Subsection"],

Cell["\<\
Note: In this example, the argument to h5dumpImportFastForward is 2 because \
it is the third item of a 0 based index.  \
\>", "Text"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportReset", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportFastForward", "[", "2", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "All", "]"}]}]}], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["Close the h5dumpImport object.", "Subsection"],

Cell[BoxData[
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportClose", "[", "]"}]}], ";"}]], "Input"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Example #3 - complete example", "Section"],

Cell["\<\
This example uses the /Fruit dataset that contains 10 items of compound data, \
each with 2 elements.\
\>", "Text"],

Cell[BoxData[{
 RowBox[{"dumpFile", " ", "=", " ", "\[IndentingNewLine]", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"FileExistsQ", "[", "h5dumpLocation", "]"}], " ", "&&", " ", 
     RowBox[{"File", "===", 
      RowBox[{"FileType", "[", "h5dumpLocation", "]"}]}]}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
      "h5dump", " ", "command", " ", "line", " ", "tool", " ", "has", " ", 
       "been", " ", "installed"}], ",", 
      RowBox[{
      "use", " ", "the", " ", "h5dump", " ", "convenience", " ", "function", 
       " ", "in", " ", "the", " ", "package", " ", "to", " ", "dump", " ", 
       "the", " ", "dataset", " ", "from", " ", "the", " ", "HDF5", " ", 
       RowBox[{"(", 
        RowBox[{".", "h5"}], ")"}], " ", 
       RowBox[{"file", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"h5dump", "[", 
     RowBox[{"h5dumpLocation", ",", "h5SamplePathAndFilename", ",", 
      RowBox[{"datasetNames", "[", 
       RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{
      "h5dump", " ", "command", " ", "line", " ", "tool", " ", "has", " ", 
       "not", " ", "been", " ", "installed"}], ",", " ", 
      RowBox[{
      "to", " ", "facilitate", " ", "these", " ", "examples", " ", "working", 
       " ", "out", " ", "of", " ", "the", " ", "box"}], ",", " ", 
      RowBox[{"use", " ", "the", " ", "h5dump", " ", "sample", " ", 
       RowBox[{"file", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"h5dumpSamplePathAndFilenames", "[", 
     RowBox[{"datasetNames", "[", 
      RowBox[{"[", "2", "]"}], "]"}], "]"}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dumpImport", "=", " ", 
   RowBox[{"h5dumpImportNew", "[", 
    RowBox[{
     RowBox[{"h5dumpImport", "[", "]"}], ",", " ", "dumpFile"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Name of HDF5 file: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportHdf5Name", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Name of dataset being imported: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDatasetName", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<The length of the data being imported: \>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataLength", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{
   "\"\<Mathematica datatype for each of the data items:\\n\\t\>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataTypes", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", " ", 
   RowBox[{"\"\<Names for each of the data items:\\n\\t\>\"", ",", " ", 
    RowBox[{"dumpImport", ".", 
     RowBox[{"h5dumpImportDataNames", "[", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"dumpImport", ".", 
  RowBox[{"h5dumpImportData", "[", "All", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dumpImport", ".", 
   RowBox[{"h5dumpImportClose", "[", "]"}]}], ";"}]}], "Input"]
}, Closed]]
}, Closed]]
},
WindowSize->{1016, 1022},
WindowMargins->{{9, Automatic}, {15, Automatic}},
PrivateNotebookOptions->{"FileOutlineCache"->False},
ShowSelection->True,
TrackCellChangeTimes->False,
FrontEndVersion->"8.0 for Mac OS X x86 (32-bit, 64-bit Kernel) (October 5, \
2011)",
StyleDefinitions->"Default.nb"
]
